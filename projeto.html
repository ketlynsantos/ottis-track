<!doctype html>
<html lang="pt-BR"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OTIS-TRACK — Projeto</title><link rel="stylesheet" href="css/styles.css"/></head>
<body>
<header><div class="nav">
  <div class="brand"><div>OTIS-TRACK</div><div class="elev"></div></div>
  <nav class="pillnav">
      <a href="home.html">Home</a> • <a href="index.html">Dashboard</a> • <a href="projetos.html">Projetos</a> • <a href="portal.html">Portal do Cliente</a></nav>
  <div class="search"><input placeholder="Buscar no projeto..."/></div>
</div></header>
<div class="container" id="project">
  <div class="two-col">
    <div>
      <h2 id="p-title">Projeto</h2>
      <div style="margin:8px 0 16px 0"><span class="badge" id="p-stage">Status</span></div>
      <div class="kpi-strip">
        <div class="card kpi"><h3>No prazo</h3><div class="value" id="p-ot">—</div></div>
        <div class="card kpi"><h3>Tempo de ciclo</h3><div class="value" id="p-lt">—</div></div>
        <div class="card kpi"><h3>Variação de custo</h3><div class="value" id="p-cv">—</div></div>
        <div class="card kpi"><h3>Primeiro passe (FPY)</h3><div class="value" id="p-fpy">—</div></div>
      </div>
      <div class="tabs" role="tablist">
        <button class="tab active" data-tab="geral" onclick="OTApp.tabTo('geral')">Visão Geral</button>
        <button class="tab" data-tab="marcos" onclick="OTApp.tabTo('marcos')">Marcos</button>
        <button class="tab" data-tab="custos" onclick="OTApp.tabTo('custos')">Custos</button>
        <button class="tab" data-tab="qualidade" onclick="OTApp.tabTo('qualidade')">Qualidade</button>
        <button class="tab" data-tab="anexos" onclick="OTApp.tabTo('anexos')">Anexos</button>
      </div>
      <div id="panel-geral" class="tabpanel" style="display:block"><div class="card"><strong>Resumo</strong><p class="small">Principais indicadores e riscos do projeto.</p></div></div>
      <div id="panel-marcos" class="tabpanel" style="display:none"><div class="card"><strong>Linha do tempo</strong><div id="timeline" class="timeline" style="margin-top:12px"></div></div></div>
      <div id="panel-custos" class="tabpanel" style="display:none"><div class="card"><strong>Orçado × Realizado</strong><div class="small" id="cost-line">—</div><div class="statbar" id="cost-bar" style="margin-top:8px"><div class="fill" style="width:40%"></div></div><div class="small" id="cost-delta" style="margin-top:6px">—</div></div></div>
      <div id="panel-qualidade" class="tabpanel" style="display:none"><div id="quality" class="grid"></div><div style="margin-top:8px"><button class="btn primary" onclick="OTApp.openModal()">+ Nova NC</button></div></div>
      <div id="panel-anexos" class="tabpanel" style="display:none"><div class="card">Sem anexos no MVP.</div></div>
    </div>
    <aside>
      <div class="card"><strong>Filtros rápidos</strong><div class="filters"><div class="pill"><label class="small">País</label><select><option>Todos</option><option>Brasil</option><option>Chile</option><option>Argentina</option></select></div><div class="pill"><label class="small">Etapa</label><select><option>Todas</option><option>Fabricação</option><option>Instalação</option><option>Testes</option></select></div></div><a class="btn block" href="projetos.html">Voltar à lista</a></div>
      <div class="card"><strong>Portal do Cliente</strong><p class="small">Compartilhe status e colete feedback.</p><a class="btn" href="#" id="portal-link">Abrir Portal</a></div>
    </aside>
  </div>
</div>
<dialog id="nc-dialog" role="dialog" aria-labelledby="nc-title">
  <div class="modal-header"><h3 id="nc-title">Nova Não Conformidade</h3></div>
  <div class="modal-body">
    <form id="nc-form" onsubmit="event.preventDefault(); OTApp.closeModal();">
      <div class="field"><label>Título*</label><input required type="text"/></div>
      <div class="field"><label>Tipo</label><select><option>Processo</option><option>Material</option><option>Execução</option></select></div>
      <div class="field"><label>Gravidade</label><select><option>Baixa</option><option>Média</option><option>Alta</option></select></div>
      <div class="field"><label>Descrição</label><textarea></textarea></div>
      <div class="field"><label>Responsável</label><input type="text"/></div>
      <div class="field"><label>Data limite</label><input type="date"/></div>
      <div class="actions"><button class="btn" type="button" onclick="OTApp.closeModal()">Cancelar</button><button class="btn primary" type="submit">Salvar</button></div>
    </form>
  </div>
</dialog>
<div class="toast"></div>
<footer class="footer">© 2025 OTIS-TRACK — MVP · Trabalho de faculdade da FIAP (Challenge 2025)</footer>
<script src="js/app.js"></script>
<script>
  const params = new URLSearchParams(location.search); const id = params.get('id') || 'BR-5510';
  const p = OTApp.getProject(id); OTApp.renderProject(p);
  const pl = document.getElementById('portal-link'); if(p){ pl.href = 'portal.html?id=' + encodeURIComponent(p.id); }
</script>
</body></html>